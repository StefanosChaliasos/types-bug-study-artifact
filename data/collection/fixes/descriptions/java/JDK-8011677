SimpleEndPosTable requires access to the parser (current token, or scanner for previous token) while it is being created.  Once created, the reference to the parser can (and should) be dropped so that the parser can be gc-ed, along with the scanner and source code buffer.