I hit this compile bug if I omit the type of the variable.

If you clone this repo: https://github.com/koolio/kool

then edit this file to omit the type of the window variable (see the commented out line version)
https://github.com/koolio/kool/blob/master/kool-stream/src/test/kotlin/test/kool/stream/WindowTest.kt#L20

then run
{code}
cd koolio-stream
mvn install

you will get this exception:

java.lang.IllegalStateException: Recursion too deep. Most likely infinite loop while substituting List<T> for <erased E : jet.Any?> defined in <module>.<root>.java.util.List; substitution: DescriptorSubstitutor.substituteTypeParameters({} / {T=List<T>})
	at org.jetbrains.jet.lang.types.TypeSubstitutor.assertRecursionDepth(TypeSubstitutor.java:331)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.substitutionResult(TypeSubstitutor.java:275)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.substituteInProjection(TypeSubstitutor.java:260)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.specializeType(TypeSubstitutor.java:220)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.substitutionResult(TypeSubstitutor.java:313)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.substituteInProjection(TypeSubstitutor.java:260)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.specializeType(TypeSubstitutor.java:220)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.substitutionResult(TypeSubstitutor.java:313)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.substituteInProjection(TypeSubstitutor.java:260)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.specializeType(TypeSubstitutor.java:220)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.substitutionResult(TypeSubstitutor.java:313)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.substituteInProjection(TypeSubstitutor.java:260)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.specializeType(TypeSubstitutor.java:220)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.substitutionResult(TypeSubstitutor.java:313)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.substituteInProjection(TypeSubstitutor.java:260)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.specializeType(TypeSubstitutor.java:220)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.substitutionResult(TypeSubstitutor.java:313)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.substituteInProjection(TypeSubstitutor.java:260)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.specializeType(TypeSubstitutor.java:220)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.substitutionResult(TypeSubstitutor.java:313)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.substituteInProjection(TypeSubstitutor.java:260)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.specializeType(TypeSubstitutor.java:220)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.substitutionResult(TypeSubstitutor.java:313)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.substituteInProjection(TypeSubstitutor.java:260)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.specializeType(TypeSubstitutor.java:220)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.substitutionResult(TypeSubstitutor.java:313)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.substituteInProjection(TypeSubstitutor.java:260)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.specializeType(TypeSubstitutor.java:220)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.substitutionResult(TypeSubstitutor.java:313)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.substituteInProjection(TypeSubstitutor.java:260)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.specializeType(TypeSubstitutor.java:220)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.substitutionResult(TypeSubstitutor.java:313)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.substituteInProjection(TypeSubstitutor.java:260)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.specializeType(TypeSubstitutor.java:220)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.substitutionResult(TypeSubstitutor.java:313)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.substituteInProjection(TypeSubstitutor.java:260)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.specializeType(TypeSubstitutor.java:220)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.substitutionResult(TypeSubstitutor.java:313)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.substituteInProjection(TypeSubstitutor.java:260)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.specializeType(TypeSubstitutor.java:220)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.substitutionResult(TypeSubstitutor.java:313)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.substituteInProjection(TypeSubstitutor.java:260)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.specializeType(TypeSubstitutor.java:220)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.substitutionResult(TypeSubstitutor.java:313)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.substituteInProjection(TypeSubstitutor.java:260)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.specializeType(TypeSubstitutor.java:220)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.substitutionResult(TypeSubstitutor.java:313)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.substituteInProjection(TypeSubstitutor.java:260)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.specializeType(TypeSubstitutor.java:220)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.substitutionResult(TypeSubstitutor.java:313)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.substituteInProjection(TypeSubstitutor.java:260)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.specializeType(TypeSubstitutor.java:220)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.substitutionResult(TypeSubstitutor.java:313)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.substituteInProjection(TypeSubstitutor.java:260)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.specializeType(TypeSubstitutor.java:220)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.substitutionResult(TypeSubstitutor.java:313)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.substituteInProjection(TypeSubstitutor.java:260)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.specializeType(TypeSubstitutor.java:220)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.substitutionResult(TypeSubstitutor.java:313)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.substituteInProjection(TypeSubstitutor.java:260)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.specializeType(TypeSubstitutor.java:220)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.substitutionResult(TypeSubstitutor.java:313)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.substituteInProjection(TypeSubstitutor.java:260)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.specializeType(TypeSubstitutor.java:220)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.substitutionResult(TypeSubstitutor.java:313)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.substituteInProjection(TypeSubstitutor.java:260)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.specializeType(TypeSubstitutor.java:220)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.substitutionResult(TypeSubstitutor.java:313)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.substituteInProjection(TypeSubstitutor.java:260)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.specializeType(TypeSubstitutor.java:220)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.substitutionResult(TypeSubstitutor.java:313)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.substituteInProjection(TypeSubstitutor.java:260)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.specializeType(TypeSubstitutor.java:220)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.substitutionResult(TypeSubstitutor.java:313)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.substituteInProjection(TypeSubstitutor.java:260)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.specializeType(TypeSubstitutor.java:220)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.substitutionResult(TypeSubstitutor.java:313)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.substituteInProjection(TypeSubstitutor.java:260)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.specializeType(TypeSubstitutor.java:220)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.substitutionResult(TypeSubstitutor.java:313)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.substituteInProjection(TypeSubstitutor.java:260)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.specializeType(TypeSubstitutor.java:220)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.substitutionResult(TypeSubstitutor.java:313)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.substituteInProjection(TypeSubstitutor.java:260)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.specializeType(TypeSubstitutor.java:220)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.substitutionResult(TypeSubstitutor.java:313)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.substituteInProjection(TypeSubstitutor.java:260)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.specializeType(TypeSubstitutor.java:220)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.substitutionResult(TypeSubstitutor.java:313)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.substituteInProjection(TypeSubstitutor.java:260)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.specializeType(TypeSubstitutor.java:220)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.substitutionResult(TypeSubstitutor.java:313)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.substituteInProjection(TypeSubstitutor.java:260)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.specializeType(TypeSubstitutor.java:220)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.substitutionResult(TypeSubstitutor.java:313)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.substituteInProjection(TypeSubstitutor.java:260)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.specializeType(TypeSubstitutor.java:220)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.substitutionResult(TypeSubstitutor.java:313)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.substituteInProjection(TypeSubstitutor.java:260)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.specializeType(TypeSubstitutor.java:220)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.substitutionResult(TypeSubstitutor.java:313)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.substituteInProjection(TypeSubstitutor.java:260)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.specializeType(TypeSubstitutor.java:220)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.unsafeSubstitute(TypeSubstitutor.java:196)
	at org.jetbrains.jet.lang.types.TypeSubstitutor.substitute(TypeSubstitutor.java:174)
	at org.jetbrains.jet.lang.descriptors.FunctionDescriptorImpl.doSubstitute(FunctionDescriptorImpl.java:201)
	at org.jetbrains.jet.lang.descriptors.FunctionDescriptorImpl.substitute(FunctionDescriptorImpl.java:181)
	at org.jetbrains.jet.lang.descriptors.FunctionDescriptorImpl.substitute(FunctionDescriptorImpl.java:40)
	at org.jetbrains.jet.lang.resolve.scopes.SubstitutingScope.substitute(SubstitutingScope.java:59)
	at org.jetbrains.jet.lang.resolve.scopes.SubstitutingScope.substitute(SubstitutingScope.java:73)
	at org.jetbrains.jet.lang.resolve.scopes.SubstitutingScope.getFunctions(SubstitutingScope.java:112)
	at org.jetbrains.jet.lang.resolve.scopes.SubstitutingScope.getFunctions(SubstitutingScope.java:112)
	at org.jetbrains.jet.lang.resolve.scopes.SubstitutingScope.getFunctions(SubstitutingScope.java:112)
	at org.jetbrains.jet.lang.resolve.scopes.SubstitutingScope.getFunctions(SubstitutingScope.java:112)
	at org.jetbrains.jet.lang.resolve.calls.TaskPrioritizers$1.getMembersByName(TaskPrioritizers.java:62)
	at org.jetbrains.jet.lang.resolve.calls.TaskPrioritizer.doComputeTasks(TaskPrioritizer.java:134)
	at org.jetbrains.jet.lang.resolve.calls.TaskPrioritizer.computePrioritizedTasks(TaskPrioritizer.java:109)
	at org.jetbrains.jet.lang.resolve.calls.CallResolver.resolveFunctionCall(CallResolver.java:143)
	at org.jetbrains.jet.lang.resolve.calls.CallResolver.resolveFunctionCall(CallResolver.java:127)
	at org.jetbrains.jet.lang.types.expressions.ExpressionTypingContext.resolveCall(ExpressionTypingContext.java:174)
	at org.jetbrains.jet.lang.types.expressions.BasicExpressionTypingVisitor.getSelectorReturnType(BasicExpressionTypingVisitor.java:597)
	at org.jetbrains.jet.lang.types.expressions.BasicExpressionTypingVisitor.visitQualifiedExpression(BasicExpressionTypingVisitor.java:542)
	at org.jetbrains.jet.lang.types.expressions.BasicExpressionTypingVisitor.visitQualifiedExpression(BasicExpressionTypingVisitor.java:63)
	at org.jetbrains.jet.lang.psi.JetVisitor.visitDotQualifiedExpression(JetVisitor.java:256)
	at org.jetbrains.jet.lang.psi.JetDotQualifiedExpression.accept(JetDotQualifiedExpression.java:37)
	at org.jetbrains.jet.lang.types.expressions.ExpressionTypingVisitorDispatcher.visitJetElement(ExpressionTypingVisitorDispatcher.java:234)
	at org.jetbrains.jet.lang.types.expressions.ExpressionTypingVisitorDispatcher.visitJetElement(ExpressionTypingVisitorDispatcher.java:37)
	at org.jetbrains.jet.lang.psi.JetVisitor.visitExpression(JetVisitor.java:144)
	at org.jetbrains.jet.lang.psi.JetVisitor.visitQualifiedExpression(JetVisitor.java:248)
	at org.jetbrains.jet.lang.psi.JetVisitor.visitDotQualifiedExpression(JetVisitor.java:256)
	at org.jetbrains.jet.lang.psi.JetDotQualifiedExpression.accept(JetDotQualifiedExpression.java:37)
	at org.jetbrains.jet.lang.types.expressions.ExpressionTypingVisitorDispatcher.getType(ExpressionTypingVisitorDispatcher.java:133)
	at org.jetbrains.jet.lang.types.expressions.ExpressionTypingVisitorDispatcher.getType(ExpressionTypingVisitorDispatcher.java:105)
	at org.jetbrains.jet.lang.types.expressions.BasicExpressionTypingVisitor.visitQualifiedExpression(BasicExpressionTypingVisitor.java:531)
	at org.jetbrains.jet.lang.types.expressions.BasicExpressionTypingVisitor.visitQualifiedExpression(BasicExpressionTypingVisitor.java:63)
	at org.jetbrains.jet.lang.psi.JetVisitor.visitDotQualifiedExpression(JetVisitor.java:256)
	at org.jetbrains.jet.lang.psi.JetDotQualifiedExpression.accept(JetDotQualifiedExpression.java:37)
	at org.jetbrains.jet.lang.types.expressions.ExpressionTypingVisitorDispatcher.visitJetElement(ExpressionTypingVisitorDispatcher.java:234)
	at org.jetbrains.jet.lang.types.expressions.ExpressionTypingVisitorDispatcher.visitJetElement(ExpressionTypingVisitorDispatcher.java:37)
	at org.jetbrains.jet.lang.psi.JetVisitor.visitExpression(JetVisitor.java:144)
	at org.jetbrains.jet.lang.psi.JetVisitor.visitQualifiedExpression(JetVisitor.java:248)
	at org.jetbrains.jet.lang.psi.JetVisitor.visitDotQualifiedExpression(JetVisitor.java:256)
	at org.jetbrains.jet.lang.psi.JetDotQualifiedExpression.accept(JetDotQualifiedExpression.java:37)
	at org.jetbrains.jet.lang.types.expressions.ExpressionTypingVisitorDispatcher.getType(ExpressionTypingVisitorDispatcher.java:133)
	at org.jetbrains.jet.lang.types.expressions.ExpressionTypingVisitorDispatcher.getType(ExpressionTypingVisitorDispatcher.java:105)
	at org.jetbrains.jet.lang.types.expressions.ExpressionTypingVisitorForStatements.visitExpression(ExpressionTypingVisitorForStatements.java:257)
	at org.jetbrains.jet.lang.types.expressions.ExpressionTypingVisitorForStatements.visitExpression(ExpressionTypingVisitorForStatements.java:53)
	at org.jetbrains.jet.lang.psi.JetVisitor.visitQualifiedExpression(JetVisitor.java:248)
	at org.jetbrains.jet.lang.psi.JetVisitor.visitDotQualifiedExpression(JetVisitor.java:256)
	at org.jetbrains.jet.lang.psi.JetDotQualifiedExpression.accept(JetDotQualifiedExpression.java:37)
	at org.jetbrains.jet.lang.types.expressions.ExpressionTypingVisitorDispatcher.getType(ExpressionTypingVisitorDispatcher.java:133)
	at org.jetbrains.jet.lang.types.expressions.ExpressionTypingVisitorDispatcher.getType(ExpressionTypingVisitorDispatcher.java:112)
	at org.jetbrains.jet.lang.types.expressions.ExpressionTypingServices.getBlockReturnedTypeWithWritableScope(ExpressionTypingServices.java:342)
	at org.jetbrains.jet.lang.types.expressions.ExpressionTypingServices.getBlockReturnedType(ExpressionTypingServices.java:216)
	at org.jetbrains.jet.lang.types.expressions.BasicExpressionTypingVisitor.visitBlockExpression(BasicExpressionTypingVisitor.java:514)
	at org.jetbrains.jet.lang.types.expressions.BasicExpressionTypingVisitor.visitBlockExpression(BasicExpressionTypingVisitor.java:510)
	at org.jetbrains.jet.lang.types.expressions.BasicExpressionTypingVisitor.visitBlockExpression(BasicExpressionTypingVisitor.java:63)
	at org.jetbrains.jet.lang.psi.JetBlockExpression.accept(JetBlockExpression.java:45)
	at org.jetbrains.jet.lang.types.expressions.ExpressionTypingVisitorDispatcher.visitJetElement(ExpressionTypingVisitorDispatcher.java:234)
	at org.jetbrains.jet.lang.types.expressions.ExpressionTypingVisitorDispatcher.visitJetElement(ExpressionTypingVisitorDispatcher.java:37)
	at org.jetbrains.jet.lang.psi.JetVisitor.visitExpression(JetVisitor.java:144)
	at org.jetbrains.jet.lang.psi.JetVisitor.visitBlockExpression(JetVisitor.java:272)
	at org.jetbrains.jet.lang.psi.JetBlockExpression.accept(JetBlockExpression.java:45)
	at org.jetbrains.jet.lang.types.expressions.ExpressionTypingVisitorDispatcher.getType(ExpressionTypingVisitorDispatcher.java:133)
	at org.jetbrains.jet.lang.types.expressions.ExpressionTypingVisitorDispatcher.getType(ExpressionTypingVisitorDispatcher.java:105)
	at org.jetbrains.jet.lang.types.expressions.ExpressionTypingVisitorDispatcher.getType(ExpressionTypingVisitorDispatcher.java:110)
	at org.jetbrains.jet.lang.types.expressions.ExpressionTypingServices.checkFunctionReturnType(ExpressionTypingServices.java:202)
	at org.jetbrains.jet.lang.types.expressions.ExpressionTypingServices.checkFunctionReturnType(ExpressionTypingServices.java:178)
	at org.jetbrains.jet.lang.types.expressions.ExpressionTypingServices.checkFunctionReturnType(ExpressionTypingServices.java:159)
	at org.jetbrains.jet.lang.resolve.BodyResolver.resolveFunctionBody(BodyResolver.java:549)
	at org.jetbrains.jet.lang.resolve.BodyResolver.resolveFunctionBodies(BodyResolver.java:533)
	at org.jetbrains.jet.lang.resolve.BodyResolver.resolveBehaviorDeclarationBodies(BodyResolver.java:110)
	at org.jetbrains.jet.lang.resolve.TopDownAnalyzer.doProcess(TopDownAnalyzer.java:155)
	at org.jetbrains.jet.lang.resolve.TopDownAnalyzer.analyzeFiles(TopDownAnalyzer.java:277)
	at org.jetbrains.jet.lang.resolve.java.AnalyzerFacadeForJVM.analyzeFilesWithJavaIntegration(AnalyzerFacadeForJVM.java:98)
	at org.jetbrains.jet.compiler.CompileSession.analyzeAndReportSemanticErrors(CompileSession.java:113)
	at org.jetbrains.jet.compiler.CompileSession.analyze(CompileSession.java:89)
	at org.jetbrains.jet.compiler.CompileEnvironment.compileBunchOfSources(CompileEnvironment.java:203)
	at org.jetbrains.jet.compiler.CompileEnvironment.compileBunchOfSourceDirectories(CompileEnvironment.java:188)
	at org.jetbrains.jet.cli.KotlinCompiler.exec(KotlinCompiler.java:149)
	at org.jetbrains.kotlin.maven.KotlinCompileMojoBase.execute(KotlinCompileMojoBase.java:115)
	at org.jetbrains.kotlin.maven.KotlinTestCompileMojo.execute(KotlinTestCompileMojo.java:45)
{code}