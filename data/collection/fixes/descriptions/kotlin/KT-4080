I tried compile html builder from page http://confluence.jetbrains.com/display/Kotlin/Type-safe+Groovy-style+builders. But code was not valid. I changed it (see attach) and code analisys is green. When I tryed to compile code I've got error:
"Kotlin: [Internal Error] org.jetbrains.jet.codegen.CompilationException: Back-end (JVM) Internal error: wrong code generatedjava.lang.NegativeArraySizeException null
Cause: java.lang.NegativeArraySizeException
File being compiled and position: (26,5) in C:/Cinimex/JavaProjects/KotlinProject/src/ru/max/test/html.kt
PsiElement: protected fun initTag<T : Element>(init: T.() -> Unit): T
            where class object T : Factory<T> {
        val tag = T.create()
        tag.init()
        children.add(tag)
        return tag
    }
The root cause was thrown at: Frame.java:1326
	at org.jetbrains.jet.codegen.FunctionCodegen.endVisit(FunctionCodegen.java:402)
	at org.jetbrains.jet.codegen.FunctionCodegen.generateMethod(FunctionCodegen.java:138)
	at org.jetbrains.jet.codegen.FunctionCodegen.generateMethod(FunctionCodegen.java:94)
	at org.jetbrains.jet.codegen.FunctionCodegen.gen(FunctionCodegen.java:80)
	at org.jetbrains.jet.codegen.MemberCodegen.genFunctionOrProperty(MemberCodegen.java:56)
	at org.jetbrains.jet.codegen.ClassBodyCodegen.generateDeclaration(ClassBodyCodegen.java:114)
	at org.jetbrains.jet.codegen.ImplementationBodyCodegen.generateDeclaration(ImplementationBodyCodegen.java:1626)
	at org.jetbrains.jet.codegen.ClassBodyCodegen.generateClassBody(ClassBodyCodegen.java:100)
	at org.jetbrains.jet.codegen.ClassBodyCodegen.generate(ClassBodyCodegen.java:68)
	at org.jetbrains.jet.codegen.MemberCodegen.genClassOrObject(MemberCodegen.java:100)
	at org.jetbrains.jet.codegen.NamespaceCodegen.generateClassOrObject(NamespaceCodegen.java:225)
	at org.jetbrains.jet.codegen.NamespaceCodegen.generate(NamespaceCodegen.java:174)
	at org.jetbrains.jet.codegen.NamespaceCodegen.generate(NamespaceCodegen.java:112)
	at org.jetbrains.jet.codegen.KotlinCodegenFacade.generateNamespace(KotlinCodegenFacade.java:73)
	at org.jetbrains.jet.codegen.KotlinCodegenFacade.compileCorrectFiles(KotlinCodegenFacade.java:62)
	at org.jetbrains.jet.cli.jvm.compiler.KotlinToJVMBytecodeCompiler.generate(KotlinToJVMBytecodeCompiler.java:361)
	at org.jetbrains.jet.cli.jvm.compiler.KotlinToJVMBytecodeCompiler.analyzeAndGenerate(KotlinToJVMBytecodeCompiler.java:300)
	at org.jetbrains.jet.cli.jvm.compiler.KotlinToJVMBytecodeCompiler.analyzeAndGenerate(KotlinToJVMBytecodeCompiler.java:273)
	at org.jetbrains.jet.cli.jvm.compiler.KotlinToJVMBytecodeCompiler.compileModule(KotlinToJVMBytecodeCompiler.java:107)
	at org.jetbrains.jet.cli.jvm.compiler.KotlinToJVMBytecodeCompiler.compileModules(KotlinToJVMBytecodeCompiler.java:128)
	at org.jetbrains.jet.cli.jvm.K2JVMCompiler.doExecute(K2JVMCompiler.java:142)
	at org.jetbrains.jet.cli.jvm.K2JVMCompiler.doExecute(K2JVMCompiler.java:53)
	at org.jetbrains.jet.cli.common.CLICompiler.exec(CLICompiler.java:131)
	at org.jetbrains.jet.cli.common.CLICompiler.exec(CLICompiler.java:117)
	at org.jetbrains.jet.cli.jvm.K2JVMCompiler.exec(K2JVMCompiler.java:186)
	at org.jetbrains.jet.cli.jvm.K2JVMCompiler.exec(K2JVMCompiler.java:53)
	at org.jetbrains.jet.cli.common.CLICompiler.exec(CLICompiler.java:41)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:606)
	at org.jetbrains.jet.compiler.runner.CompilerRunnerUtil.invokeExecMethod(CompilerRunnerUtil.java:116)
	at org.jetbrains.jet.compiler.runner.KotlinCompilerRunner.execInProcess(KotlinCompilerRunner.java:99)
	at org.jetbrains.jet.compiler.runner.KotlinCompilerRunner.access$000(KotlinCompilerRunner.java:44)
	at org.jetbrains.jet.compiler.runner.KotlinCompilerRunner$1.fun(KotlinCompilerRunner.java:86)
	at org.jetbrains.jet.compiler.runner.KotlinCompilerRunner$1.fun(KotlinCompilerRunner.java:83)
	at org.jetbrains.jet.compiler.runner.CompilerRunnerUtil.outputCompilerMessagesAndHandleExitCode(CompilerRunnerUtil.java:125)
	at org.jetbrains.jet.compiler.runner.KotlinCompilerRunner.runInProcess(KotlinCompilerRunner.java:83)
	at org.jetbrains.jet.compiler.runner.KotlinCompilerRunner.runK2JvmCompiler(KotlinCompilerRunner.java:61)
	at org.jetbrains.jet.jps.build.KotlinBuilder.build(KotlinBuilder.java:136)
	at org.jetbrains.jps.incremental.IncProjectBuilder.runModuleLevelBuilders(IncProjectBuilder.java:1018)
	at org.jetbrains.jps.incremental.IncProjectBuilder.runBuildersForChunk(IncProjectBuilder.java:742)
	at org.jetbrains.jps.incremental.IncProjectBuilder.buildTargetsChunk(IncProjectBuilder.java:790)
	at org.jetbrains.jps.incremental.IncProjectBuilder.buildChunkIfAffected(IncProjectBuilder.java:705)
	at org.jetbrains.jps.incremental.IncProjectBuilder.buildChunks(IncProjectBuilder.java:526)
	at org.jetbrains.jps.incremental.IncProjectBuilder.runBuild(IncProjectBuilder.java:314)
	at org.jetbrains.jps.incremental.IncProjectBuilder.build(IncProjectBuilder.java:179)
	at org.jetbrains.jps.cmdline.BuildRunner.runBuild(BuildRunner.java:129)
	at org.jetbrains.jps.cmdline.BuildSession.runBuild(BuildSession.java:220)
	at org.jetbrains.jps.cmdline.BuildSession.run(BuildSession.java:112)
	at org.jetbrains.jps.cmdline.BuildMain$MyMessageHandler$1.run(BuildMain.java:132)
	at org.jetbrains.jps.service.impl.SharedThreadPoolImpl$1.run(SharedThreadPoolImpl.java:41)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
	at java.util.concurrent.FutureTask.run(FutureTask.java:262)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
	at java.lang.Thread.run(Thread.java:724)
Caused by: java.lang.NegativeArraySizeException
	at org.jetbrains.asm4.Frame.merge(Frame.java:1326)
	at org.jetbrains.asm4.MethodWriter.visitMaxs(MethodWriter.java:1353)
	at org.jetbrains.jet.codegen.FunctionCodegen.endVisit(FunctionCodegen.java:396)
	... 56 more"
It's strange different between code analisys and compiler. :)