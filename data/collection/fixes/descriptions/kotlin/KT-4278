Kotlin: [Internal Error] org.jetbrains.jet.codegen.CompilationException: Back-end (JVM) Internal error: Error types are not allowed when classBuilderMode = FULL. Descriptor: <ERROR CLASS: >. For declaration null:null in null:null
Cause: Error types are not allowed when classBuilderMode = FULL. Descriptor: <ERROR CLASS: >. For declaration null:null in null:null
File being compiled and position: (46,47) in /home/x2bool/IdeaProjects/Sorts/src/main.kt
PsiElement: ::insertionSort
The root cause was thrown at: JetTypeMapper.java:285
	at org.jetbrains.jet.codegen.ExpressionCodegen.genQualified(ExpressionCodegen.java:267)
	at org.jetbrains.jet.codegen.ExpressionCodegen.genQualified(ExpressionCodegen.java:234)
	at org.jetbrains.jet.codegen.ExpressionCodegen.gen(ExpressionCodegen.java:273)
	at org.jetbrains.jet.codegen.ExpressionCodegen.gen(ExpressionCodegen.java:277)
	at org.jetbrains.jet.codegen.ExpressionCodegen.pushMethodArguments(ExpressionCodegen.java:2325)
	at org.jetbrains.jet.codegen.ExpressionCodegen.pushArgumentsAndInvoke(ExpressionCodegen.java:2129)
	at org.jetbrains.jet.codegen.ExpressionCodegen.invokeMethodWithArguments(ExpressionCodegen.java:2125)
	at org.jetbrains.jet.codegen.ExpressionCodegen.invokeFunction(ExpressionCodegen.java:2005)
	at org.jetbrains.jet.codegen.ExpressionCodegen.visitCallExpression(ExpressionCodegen.java:1907)
	at org.jetbrains.jet.codegen.ExpressionCodegen.visitCallExpression(ExpressionCodegen.java:80)
	at org.jetbrains.jet.lang.psi.JetCallExpression.accept(JetCallExpression.java:42)
	at org.jetbrains.jet.codegen.ExpressionCodegen.genQualified(ExpressionCodegen.java:257)
	at org.jetbrains.jet.codegen.ExpressionCodegen.genQualified(ExpressionCodegen.java:234)
	at org.jetbrains.jet.codegen.ExpressionCodegen.gen(ExpressionCodegen.java:273)
	at org.jetbrains.jet.codegen.ExpressionCodegen.gen(ExpressionCodegen.java:277)
	at org.jetbrains.jet.codegen.ExpressionCodegen.pushMethodArguments(ExpressionCodegen.java:2325)
	at org.jetbrains.jet.codegen.ExpressionCodegen.pushArgumentsAndInvoke(ExpressionCodegen.java:2129)
	at org.jetbrains.jet.codegen.ExpressionCodegen.invokeMethodWithArguments(ExpressionCodegen.java:2125)
	at org.jetbrains.jet.codegen.ExpressionCodegen.invokeFunction(ExpressionCodegen.java:2005)
	at org.jetbrains.jet.codegen.ExpressionCodegen.visitCallExpression(ExpressionCodegen.java:1907)
	at org.jetbrains.jet.codegen.ExpressionCodegen.visitCallExpression(ExpressionCodegen.java:80)
	at org.jetbrains.jet.lang.psi.JetCallExpression.accept(JetCallExpression.java:42)
	at org.jetbrains.jet.codegen.CodegenStatementVisitor.visitJetElement(CodegenStatementVisitor.java:31)
	at org.jetbrains.jet.codegen.CodegenStatementVisitor.visitJetElement(CodegenStatementVisitor.java:22)
	at org.jetbrains.jet.lang.psi.JetVisitor.visitExpression(JetVisitor.java:154)
	at org.jetbrains.jet.lang.psi.JetVisitor.visitCallExpression(JetVisitor.java:246)
	at org.jetbrains.jet.lang.psi.JetCallExpression.accept(JetCallExpression.java:42)
	at org.jetbrains.jet.codegen.ExpressionCodegen.genQualified(ExpressionCodegen.java:257)
	at org.jetbrains.jet.codegen.ExpressionCodegen.genStatement(ExpressionCodegen.java:286)
	at org.jetbrains.jet.codegen.ExpressionCodegen.generateBlock(ExpressionCodegen.java:1429)
	at org.jetbrains.jet.codegen.ExpressionCodegen.visitBlockExpression(ExpressionCodegen.java:1288)
	at org.jetbrains.jet.codegen.ExpressionCodegen.visitBlockExpression(ExpressionCodegen.java:80)
	at org.jetbrains.jet.lang.psi.JetBlockExpression.accept(JetBlockExpression.java:47)
	at org.jetbrains.jet.codegen.ExpressionCodegen.genQualified(ExpressionCodegen.java:257)
	at org.jetbrains.jet.codegen.ExpressionCodegen.genQualified(ExpressionCodegen.java:234)
	at org.jetbrains.jet.codegen.ExpressionCodegen.gen(ExpressionCodegen.java:273)
	at org.jetbrains.jet.codegen.ExpressionCodegen.returnExpression(ExpressionCodegen.java:1590)
	at org.jetbrains.jet.codegen.FunctionGenerationStrategy$FunctionDefault.doGenerateBody(FunctionGenerationStrategy.java:83)
	at org.jetbrains.jet.codegen.FunctionGenerationStrategy$CodegenBased.generateBody(FunctionGenerationStrategy.java:106)
	at org.jetbrains.jet.codegen.FunctionCodegen.generateMethodBody(FunctionCodegen.java:293)
	at org.jetbrains.jet.codegen.FunctionCodegen.generateMethod(FunctionCodegen.java:146)
	at org.jetbrains.jet.codegen.FunctionCodegen.generateMethod(FunctionCodegen.java:97)
	at org.jetbrains.jet.codegen.FunctionCodegen.gen(FunctionCodegen.java:83)
	at org.jetbrains.jet.codegen.MemberCodegen.genFunctionOrProperty(MemberCodegen.java:47)
	at org.jetbrains.jet.codegen.NamespacePartCodegen.generate(NamespacePartCodegen.java:84)
	at org.jetbrains.jet.codegen.NamespaceCodegen.generate(NamespaceCodegen.java:191)
	at org.jetbrains.jet.codegen.NamespaceCodegen.generate(NamespaceCodegen.java:113)
	at org.jetbrains.jet.codegen.KotlinCodegenFacade.generateNamespace(KotlinCodegenFacade.java:71)
	at org.jetbrains.jet.codegen.KotlinCodegenFacade.compileCorrectFiles(KotlinCodegenFacade.java:60)
	at org.jetbrains.jet.cli.jvm.compiler.KotlinToJVMBytecodeCompiler.generate(KotlinToJVMBytecodeCompiler.java:300)
	at org.jetbrains.jet.cli.jvm.compiler.KotlinToJVMBytecodeCompiler.analyzeAndGenerate(KotlinToJVMBytecodeCompiler.java:261)
	at org.jetbrains.jet.cli.jvm.compiler.KotlinToJVMBytecodeCompiler.compileModule(KotlinToJVMBytecodeCompiler.java:103)
	at org.jetbrains.jet.cli.jvm.compiler.KotlinToJVMBytecodeCompiler.compileModules(KotlinToJVMBytecodeCompiler.java:139)
	at org.jetbrains.jet.cli.jvm.K2JVMCompiler.doExecute(K2JVMCompiler.java:132)
	at org.jetbrains.jet.cli.jvm.K2JVMCompiler.doExecute(K2JVMCompiler.java:48)
	at org.jetbrains.jet.cli.common.CLICompiler.exec(CLICompiler.java:152)
	at org.jetbrains.jet.cli.common.CLICompiler.exec(CLICompiler.java:138)
	at org.jetbrains.jet.cli.common.CLICompiler.exec(CLICompiler.java:57)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:601)
	at org.jetbrains.jet.compiler.runner.CompilerRunnerUtil.invokeExecMethod(CompilerRunnerUtil.java:121)
	at org.jetbrains.jet.compiler.runner.KotlinCompilerRunner.execCompiler(KotlinCompilerRunner.java:111)
	at org.jetbrains.jet.compiler.runner.KotlinCompilerRunner.access$000(KotlinCompilerRunner.java:39)
	at org.jetbrains.jet.compiler.runner.KotlinCompilerRunner$1.fun(KotlinCompilerRunner.java:94)
	at org.jetbrains.jet.compiler.runner.KotlinCompilerRunner$1.fun(KotlinCompilerRunner.java:91)
	at org.jetbrains.jet.compiler.runner.CompilerRunnerUtil.outputCompilerMessagesAndHandleExitCode(CompilerRunnerUtil.java:130)
	at org.jetbrains.jet.compiler.runner.KotlinCompilerRunner.runCompiler(KotlinCompilerRunner.java:91)
	at org.jetbrains.jet.compiler.runner.KotlinCompilerRunner.runK2JvmCompiler(KotlinCompilerRunner.java:57)
	at org.jetbrains.jet.jps.build.KotlinBuilder.build(KotlinBuilder.java:168)
	at org.jetbrains.jps.incremental.IncProjectBuilder.runModuleLevelBuilders(IncProjectBuilder.java:1086)
	at org.jetbrains.jps.incremental.IncProjectBuilder.runBuildersForChunk(IncProjectBuilder.java:797)
	at org.jetbrains.jps.incremental.IncProjectBuilder.buildTargetsChunk(IncProjectBuilder.java:845)
	at org.jetbrains.jps.incremental.IncProjectBuilder.buildChunkIfAffected(IncProjectBuilder.java:760)
	at org.jetbrains.jps.incremental.IncProjectBuilder.buildChunks(IncProjectBuilder.java:583)
	at org.jetbrains.jps.incremental.IncProjectBuilder.runBuild(IncProjectBuilder.java:344)
	at org.jetbrains.jps.incremental.IncProjectBuilder.build(IncProjectBuilder.java:184)
	at org.jetbrains.jps.cmdline.BuildRunner.runBuild(BuildRunner.java:129)
	at org.jetbrains.jps.cmdline.BuildSession.runBuild(BuildSession.java:224)
	at org.jetbrains.jps.cmdline.BuildSession.run(BuildSession.java:113)
	at org.jetbrains.jps.cmdline.BuildMain$MyMessageHandler$1.run(BuildMain.java:133)
	at org.jetbrains.jps.service.impl.SharedThreadPoolImpl$1.run(SharedThreadPoolImpl.java:41)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
	at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
	at java.util.concurrent.FutureTask.run(FutureTask.java:166)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
	at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.IllegalStateException: Error types are not allowed when classBuilderMode = FULL. Descriptor: <ERROR CLASS: >. For declaration null:null in null:null
	at org.jetbrains.jet.codegen.state.JetTypeMapper.mapType(JetTypeMapper.java:285)
	at org.jetbrains.jet.codegen.state.JetTypeMapper.mapType(JetTypeMapper.java:303)
	at org.jetbrains.jet.codegen.state.JetTypeMapper.mapType(JetTypeMapper.java:235)
	at org.jetbrains.jet.codegen.state.JetTypeMapper.writeGenericType(JetTypeMapper.java:382)
	at org.jetbrains.jet.codegen.state.JetTypeMapper.mapType(JetTypeMapper.java:319)
	at org.jetbrains.jet.codegen.state.JetTypeMapper.mapType(JetTypeMapper.java:235)
	at org.jetbrains.jet.codegen.state.JetTypeMapper.mapSupertype(JetTypeMapper.java:210)
	at org.jetbrains.jet.codegen.ClosureCodegen.getGenericSignature(ClosureCodegen.java:298)
	at org.jetbrains.jet.codegen.ClosureCodegen.gen(ClosureCodegen.java:106)
	at org.jetbrains.jet.codegen.ExpressionCodegen.visitCallableReferenceExpression(ExpressionCodegen.java:2586)
	at org.jetbrains.jet.codegen.ExpressionCodegen.visitCallableReferenceExpression(ExpressionCodegen.java:80)
	at org.jetbrains.jet.lang.psi.JetCallableReferenceExpression.accept(JetCallableReferenceExpression.java:57)
	at org.jetbrains.jet.codegen.ExpressionCodegen.genQualified(ExpressionCodegen.java:257)
	... 88 more