{code}
class Outer {
    class Nested{
        fun foo(s: String) = s.extension()
    }

    private fun String.extension(): String = this
}
{code}

Causes

Error:(5, 32) Kotlin: [Internal Error] org.jetbrains.jet.codegen.CompilationException: Back-end (JVM) Internal error: Don't know how to generate outer expression for internal final class Nested defined in pack1.Outer[MutableClassDescriptor@37f4330d]
Cause: Don't know how to generate outer expression for internal final class Nested defined in pack1.Outer[MutableClassDescriptor@37f4330d]
File being compiled and position: (5,32) in /Users/valentin/Work/testKotlin/src/pack/Converted.kt
PsiElement: extension()
The root cause was thrown at: CodegenContext.java:127
	at org.jetbrains.jet.codegen.ExpressionCodegen.genQualified(ExpressionCodegen.java:240)
	at org.jetbrains.jet.codegen.ExpressionCodegen.genQualified(ExpressionCodegen.java:211)
	at org.jetbrains.jet.codegen.ExpressionCodegen.visitDotQualifiedExpression(ExpressionCodegen.java:2550)
	at org.jetbrains.jet.codegen.ExpressionCodegen.visitDotQualifiedExpression(ExpressionCodegen.java:81)
	at org.jetbrains.jet.lang.psi.JetDotQualifiedExpression.accept(JetDotQualifiedExpression.java:44)
	at org.jetbrains.jet.codegen.ExpressionCodegen.genQualified(ExpressionCodegen.java:230)
	at org.jetbrains.jet.codegen.ExpressionCodegen.genQualified(ExpressionCodegen.java:211)
	at org.jetbrains.jet.codegen.ExpressionCodegen.gen(ExpressionCodegen.java:246)
	at org.jetbrains.jet.codegen.ExpressionCodegen.returnExpression(ExpressionCodegen.java:1595)
	at org.jetbrains.jet.codegen.FunctionGenerationStrategy$FunctionDefault.doGenerateBody(FunctionGenerationStrategy.java:66)
	at org.jetbrains.jet.codegen.FunctionGenerationStrategy$CodegenBased.generateBody(FunctionGenerationStrategy.java:88)
	at org.jetbrains.jet.codegen.FunctionCodegen.generateMethodBody(FunctionCodegen.java:314)
	at org.jetbrains.jet.codegen.FunctionCodegen.generateMethod(FunctionCodegen.java:167)
	at org.jetbrains.jet.codegen.FunctionCodegen.generateMethod(FunctionCodegen.java:118)
	at org.jetbrains.jet.codegen.FunctionCodegen.gen(FunctionCodegen.java:103)
	at org.jetbrains.jet.codegen.MemberCodegen.genFunctionOrProperty(MemberCodegen.java:119)
	at org.jetbrains.jet.codegen.ClassBodyCodegen.generateDeclaration(ClassBodyCodegen.java:93)
	at org.jetbrains.jet.codegen.ImplementationBodyCodegen.generateDeclaration(ImplementationBodyCodegen.java:1619)
	at org.jetbrains.jet.codegen.ClassBodyCodegen.generateBody(ClassBodyCodegen.java:68)
	at org.jetbrains.jet.codegen.MemberCodegen.generate(MemberCodegen.java:89)
	at org.jetbrains.jet.codegen.MemberCodegen.genClassOrObject(MemberCodegen.java:170)
	at org.jetbrains.jet.codegen.MemberCodegen.genClassOrObject(MemberCodegen.java:187)
	at org.jetbrains.jet.codegen.ClassBodyCodegen.generateDeclaration(ClassBodyCodegen.java:100)
	at org.jetbrains.jet.codegen.ImplementationBodyCodegen.generateDeclaration(ImplementationBodyCodegen.java:1619)
	at org.jetbrains.jet.codegen.ClassBodyCodegen.generateBody(ClassBodyCodegen.java:61)
	at org.jetbrains.jet.codegen.MemberCodegen.generate(MemberCodegen.java:89)
	at org.jetbrains.jet.codegen.MemberCodegen.genClassOrObject(MemberCodegen.java:170)
	at org.jetbrains.jet.codegen.PackageCodegen.generateClassOrObject(PackageCodegen.java:360)
	at org.jetbrains.jet.codegen.PackageCodegen.generate(PackageCodegen.java:274)
	at org.jetbrains.jet.codegen.PackageCodegen.generate(PackageCodegen.java:200)
	at org.jetbrains.jet.codegen.KotlinCodegenFacade.generatePackage(KotlinCodegenFacade.java:80)
	at org.jetbrains.jet.codegen.KotlinCodegenFacade.compileCorrectFiles(KotlinCodegenFacade.java:67)
	at org.jetbrains.jet.cli.jvm.compiler.KotlinToJVMBytecodeCompiler.generate(KotlinToJVMBytecodeCompiler.java:349)
	at org.jetbrains.jet.cli.jvm.compiler.KotlinToJVMBytecodeCompiler.compileModules(KotlinToJVMBytecodeCompiler.java:138)
	at org.jetbrains.jet.cli.jvm.K2JVMCompiler.doExecute(K2JVMCompiler.java:140)
	at org.jetbrains.jet.cli.jvm.K2JVMCompiler.doExecute(K2JVMCompiler.java:51)
	at org.jetbrains.jet.cli.common.CLICompiler.exec(CLICompiler.java:139)
	at org.jetbrains.jet.cli.common.CLICompiler.exec(CLICompiler.java:125)
	at org.jetbrains.jet.cli.common.CLICompiler.exec(CLICompiler.java:57)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:601)
	at org.jetbrains.jet.compiler.runner.CompilerRunnerUtil.invokeExecMethod(CompilerRunnerUtil.java:129)
	at org.jetbrains.jet.compiler.runner.KotlinCompilerRunner.execCompiler(KotlinCompilerRunner.java:112)
	at org.jetbrains.jet.compiler.runner.KotlinCompilerRunner.access$000(KotlinCompilerRunner.java:40)
	at org.jetbrains.jet.compiler.runner.KotlinCompilerRunner$1.fun(KotlinCompilerRunner.java:95)
	at org.jetbrains.jet.compiler.runner.KotlinCompilerRunner$1.fun(KotlinCompilerRunner.java:92)
	at org.jetbrains.jet.compiler.runner.CompilerRunnerUtil.outputCompilerMessagesAndHandleExitCode(CompilerRunnerUtil.java:138)
	at org.jetbrains.jet.compiler.runner.KotlinCompilerRunner.runCompiler(KotlinCompilerRunner.java:92)
	at org.jetbrains.jet.compiler.runner.KotlinCompilerRunner.runK2JvmCompiler(KotlinCompilerRunner.java:58)
	at org.jetbrains.jet.jps.build.KotlinBuilder.build(KotlinBuilder.java:209)
	at org.jetbrains.jps.incremental.IncProjectBuilder.runModuleLevelBuilders(IncProjectBuilder.java:1106)
	at org.jetbrains.jps.incremental.IncProjectBuilder.runBuildersForChunk(IncProjectBuilder.java:814)
	at org.jetbrains.jps.incremental.IncProjectBuilder.buildTargetsChunk(IncProjectBuilder.java:862)
	at org.jetbrains.jps.incremental.IncProjectBuilder.buildChunkIfAffected(IncProjectBuilder.java:777)
	at org.jetbrains.jps.incremental.IncProjectBuilder.buildChunks(IncProjectBuilder.java:600)
	at org.jetbrains.jps.incremental.IncProjectBuilder.runBuild(IncProjectBuilder.java:352)
	at org.jetbrains.jps.incremental.IncProjectBuilder.build(IncProjectBuilder.java:184)
	at org.jetbrains.jps.cmdline.BuildRunner.runBuild(BuildRunner.java:129)
	at org.jetbrains.jps.cmdline.BuildSession.runBuild(BuildSession.java:224)
	at org.jetbrains.jps.cmdline.BuildSession.run(BuildSession.java:113)
	at org.jetbrains.jps.cmdline.BuildMain$MyMessageHandler$1.run(BuildMain.java:133)
	at org.jetbrains.jps.service.impl.SharedThreadPoolImpl$1.run(SharedThreadPoolImpl.java:41)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
	at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
	at java.util.concurrent.FutureTask.run(FutureTask.java:166)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
	at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.UnsupportedOperationException: Don't know how to generate outer expression for internal final class Nested defined in pack1.Outer[MutableClassDescriptor@37f4330d]
	at org.jetbrains.jet.codegen.context.CodegenContext.getOuterExpression(CodegenContext.java:127)
	at org.jetbrains.jet.codegen.context.CodegenContext.getOuterExpression(CodegenContext.java:121)
	at org.jetbrains.jet.codegen.ExpressionCodegen.generateThisOrOuter(ExpressionCodegen.java:2246)
	at org.jetbrains.jet.codegen.StackValue$ThisOuter.put(StackValue.java:1033)
	at org.jetbrains.jet.codegen.ExpressionCodegen.generateFromResolvedCall(ExpressionCodegen.java:2134)
	at org.jetbrains.jet.codegen.StackValue$CallReceiver.put(StackValue.java:1141)
	at org.jetbrains.jet.codegen.ExpressionCodegen.pushMethodArgumentsWithCallReceiver(ExpressionCodegen.java:2285)
	at org.jetbrains.jet.codegen.ExpressionCodegen.invokeMethodWithArguments(ExpressionCodegen.java:2091)
	at org.jetbrains.jet.codegen.ExpressionCodegen.invokeFunction(ExpressionCodegen.java:2011)
	at org.jetbrains.jet.codegen.ExpressionCodegen.visitCallExpression(ExpressionCodegen.java:1914)
	at org.jetbrains.jet.codegen.ExpressionCodegen.visitCallExpression(ExpressionCodegen.java:81)
	at org.jetbrains.jet.lang.psi.JetCallExpression.accept(JetCallExpression.java:37)
	at org.jetbrains.jet.codegen.ExpressionCodegen.genQualified(ExpressionCodegen.java:230)
	... 69 more