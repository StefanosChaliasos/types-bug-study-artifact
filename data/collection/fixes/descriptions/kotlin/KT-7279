M11 enum classes with companion objects throw IllegalArgumentException in IDEA.

{code}
public enum class Foo(public val t: String) {
	companion object {
	}
}
{code}

Event log:
11:51:39 AM IllegalArgumentException: Unsupported declaration type: PRIMARY_CONSTRUCTOR File name: HelloJvm.kt
public enum class Foo(public val t: String) {
	companion object {
	}
} (show balloon)

at org.jetbrains.kotlin.resolve.lazy.LazyDeclarationResolver$1.visitJetElement(LazyDeclarationResolver.java:197)
	at org.jetbrains.kotlin.resolve.lazy.LazyDeclarationResolver$1.visitJetElement(LazyDeclarationResolver.java:95)
	at org.jetbrains.kotlin.psi.JetVisitor.visitPrimaryConstructor(JetVisitor.java:41)
	at org.jetbrains.kotlin.psi.JetPrimaryConstructor.accept(JetPrimaryConstructor.java:42)
	at org.jetbrains.kotlin.resolve.lazy.LazyDeclarationResolver.resolveToDescriptor(LazyDeclarationResolver.java:95)
	at org.jetbrains.kotlin.resolve.lazy.ResolveSession.resolveToDescriptor(ResolveSession.java:314)
	at org.jetbrains.kotlin.resolve.lazy.ElementResolver.resolveToElement(ElementResolver.kt:87)
	at org.jetbrains.kotlin.idea.project.ResolveSessionForBodies.resolveToElement(ResolveSessionForBodies.java:55)
	at org.jetbrains.kotlin.idea.caches.resolve.KotlinCacheService$getResolutionFacade$1.analyze(KotlinCacheService.kt:56)
	at org.jetbrains.kotlin.idea.caches.resolve.ResolvePackage$resolutionApi$66418da6.analyze(resolutionApi.kt:42)
	at org.jetbrains.kotlin.idea.caches.resolve.ResolvePackage$resolutionApi$66418da6.analyze$default(resolutionApi.kt:41)
	at org.jetbrains.kotlin.idea.search.usagesSearch.ClassUsagesSearchHelper$makeAdditionalSearchDelegate$1$1.visitJetElement(searchHelpers.kt:171)
	at org.jetbrains.kotlin.psi.JetVisitorVoid.visitJetElement(JetVisitorVoid.java:435)
	at org.jetbrains.kotlin.psi.JetVisitorVoid.visitJetElement(JetVisitorVoid.java:21)
	at org.jetbrains.kotlin.psi.JetVisitor.visitParameterList(JetVisitor.java:118)
	at org.jetbrains.kotlin.psi.JetVisitorVoid.visitParameterList(JetVisitorVoid.java:113)
	at org.jetbrains.kotlin.psi.JetVisitorVoid.visitParameterList(JetVisitorVoid.java:555)
	at org.jetbrains.kotlin.psi.JetVisitorVoid.visitParameterList(JetVisitorVoid.java:21)
	at org.jetbrains.kotlin.psi.JetParameterList.accept(JetParameterList.java:39)
	at org.jetbrains.kotlin.psi.JetElementImplStub.accept(JetElementImplStub.java:57)
	at com.intellij.psi.impl.PsiElementBase.acceptChildren(PsiElementBase.java:69)
	at org.jetbrains.kotlin.idea.search.usagesSearch.ClassUsagesSearchHelper$makeAdditionalSearchDelegate$1$1.visitJetElement(searchHelpers.kt:169)
	at org.jetbrains.kotlin.psi.JetVisitorVoid.visitJetElement(JetVisitorVoid.java:435)
	at org.jetbrains.kotlin.psi.JetVisitorVoid.visitJetElement(JetVisitorVoid.java:21)
	at org.jetbrains.kotlin.psi.JetVisitor.visitPrimaryConstructor(JetVisitor.java:41)
	at org.jetbrains.kotlin.psi.JetPrimaryConstructor.accept(JetPrimaryConstructor.java:42)
	at org.jetbrains.kotlin.psi.JetElementImplStub.accept(JetElementImplStub.java:57)
	at com.intellij.psi.impl.PsiElementBase.acceptChildren(PsiElementBase.java:69)
	at org.jetbrains.kotlin.idea.search.usagesSearch.ClassUsagesSearchHelper$makeAdditionalSearchDelegate$1.invoke(searchHelpers.kt:166)
	at org.jetbrains.kotlin.idea.search.usagesSearch.ClassUsagesSearchHelper$makeAdditionalSearchDelegate$1.invoke(searchHelpers.kt:148)
	at org.jetbrains.kotlin.idea.search.usagesSearch.UsagesSearch$executorImpl$1.processQuery(usagesSearch.kt:169)
	at org.jetbrains.kotlin.idea.search.usagesSearch.UsagesSearch$executorImpl$1.processQuery(usagesSearch.kt:165)
	at com.intellij.openapi.application.QueryExecutorBase.execute(QueryExecutorBase.java:49)
	at com.intellij.util.ExecutorsQuery.processResults(ExecutorsQuery.java:43)
	at com.intellij.util.AbstractQuery.forEach(AbstractQuery.java:75)
	at com.intellij.util.MergeQuery.processSubQuery(MergeQuery.java:84)
	at com.intellij.util.MergeQuery.forEach(MergeQuery.java:56)
	at org.jetbrains.kotlin.idea.inspections.UnusedSymbolInspection.hasNonTrivialUsages(UnusedSymbolInspection.kt:196)
	at org.jetbrains.kotlin.idea.inspections.UnusedSymbolInspection.access$hasNonTrivialUsages$2(UnusedSymbolInspection.kt:53)
	at org.jetbrains.kotlin.idea.inspections.UnusedSymbolInspection$buildVisitor$1.visitNamedDeclaration(UnusedSymbolInspection.kt:116)
	at org.jetbrains.kotlin.psi.JetVisitorVoid.visitNamedDeclaration(JetVisitorVoid.java:935)
	at org.jetbrains.kotlin.psi.JetVisitorVoid.visitNamedDeclaration(JetVisitorVoid.java:21)
	at org.jetbrains.kotlin.psi.JetVisitor.visitObjectDeclaration(JetVisitor.java:406)
	at org.jetbrains.kotlin.psi.JetVisitorVoid.visitObjectDeclaration(JetVisitorVoid.java:397)
	at org.jetbrains.kotlin.psi.JetVisitorVoid.visitObjectDeclaration(JetVisitorVoid.java:983)
	at org.jetbrains.kotlin.psi.JetVisitorVoid.visitObjectDeclaration(JetVisitorVoid.java:21)
	at org.jetbrains.kotlin.psi.JetObjectDeclaration.accept(JetObjectDeclaration.java:169)
	at org.jetbrains.kotlin.psi.JetElementImplStub.accept(JetElementImplStub.java:57)
	at com.intellij.codeInspection.InspectionEngine.acceptElements(InspectionEngine.java:80)
	at com.intellij.codeInspection.InspectionEngine.createVisitorAndAcceptElements(InspectionEngine.java:69)
	at com.intellij.codeInsight.daemon.impl.LocalInspectionsPass.a(LocalInspectionsPass.java:285)
	at com.intellij.codeInsight.daemon.impl.LocalInspectionsPass.access$200(LocalInspectionsPass.java:75)
	at com.intellij.codeInsight.daemon.impl.LocalInspectionsPass$2.process(LocalInspectionsPass.java:254)
	at com.intellij.codeInsight.daemon.impl.LocalInspectionsPass$2.process(LocalInspectionsPass.java:251)
	at com.intellij.concurrency.ApplierCompleter.a(ApplierCompleter.java:122)
	at com.intellij.concurrency.ApplierCompleter.access$000(ApplierCompleter.java:44)
	at com.intellij.concurrency.ApplierCompleter$1.run(ApplierCompleter.java:85)
	at com.intellij.openapi.application.impl.ApplicationImpl.tryRunReadAction(ApplicationImpl.java:1104)
	at com.intellij.concurrency.ApplierCompleter$2.run(ApplierCompleter.java:94)
	at com.intellij.openapi.progress.impl.CoreProgressManager.a(CoreProgressManager.java:452)
	at com.intellij.openapi.progress.impl.CoreProgressManager.a(CoreProgressManager.java:449)
	at com.intellij.openapi.progress.impl.CoreProgressManager.executeProcessUnderProgress(CoreProgressManager.java:402)
	at com.intellij.openapi.progress.impl.ProgressManagerImpl.executeProcessUnderProgress(ProgressManagerImpl.java:54)
	at com.intellij.concurrency.ApplierCompleter.a(ApplierCompleter.java:106)
	at com.intellij.concurrency.ApplierCompleter.compute(ApplierCompleter.java:82)
	at jsr166e.CountedCompleter.exec(CountedCompleter.java:684)
	at jsr166e.ForkJoinTask.doExec(ForkJoinTask.java:260)
	at jsr166e.ForkJoinPool$WorkQueue.runTask(ForkJoinPool.java:858)
	at jsr166e.ForkJoinPool.scan(ForkJoinPool.java:1687)
	at jsr166e.ForkJoinPool.runWorker(ForkJoinPool.java:1642)
	at jsr166e.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:109)

