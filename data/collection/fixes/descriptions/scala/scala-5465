Pattern matching that involves extractors cannot be typechecked twice. The first typecheck distorts its structure, introducing UnApply node that wraps a synthetic SELECTOR_DUMMY ident that doesn't have a definition. If one performs resetAllAttrs, the resulting tree can no longer be typechecked.