Sometimes compiler transforms qualified package names into This(<package class symbol>). After resetAllAttrs, symbol get lost and there's only an unqualified TypeName left, so the result cannot be typechecked anymore.